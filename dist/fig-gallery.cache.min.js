"use strict";function FigureGallery(e){var t=this,n=e.container,i=void 0===n?"#gallery":n,r=e.gallerySelector,o=void 0===r?".gallery":r,a=e.openSelector,l=void 0===a?".open":a,s=e.currentSelector,c=void 0===s?".current":s,u=e.buttonContainerSelector,d=void 0===u?null:u,v=e.buttonSelectors,h=void 0===v?{}:v,p=e.buttonContents,g=void 0===p?{}:p,f=e.buttonsOrder,m=void 0===f?["prev","next","close"]:f,E=e.cycle,C=void 0===E||E,w=e.overlaySelectors,y=void 0===w?{}:w,b=e.openable,O=void 0===b||b,L=e.throwsOpenIndexError,N=void 0!==L&&L,T=e.resizePolicy,k=void 0===T?"CONTENT":T,S=e.buttonPlacementPolicy,x=void 0===S?"ALL":S,I=e.buttonContainerPlacementPolicy,F=void 0===I?"OUTSIDE_CONTENT":I;if("string"==typeof i&&(i=document.querySelector(i)),!(i instanceof HTMLElement))throw new Error("The gallery container must be a valid DOM element.");if(null!==d){if(["ALL","NAVIGATORS_ONLY","CLOSE_ONLY"].indexOf(x)<=-1)throw new Error("The specified button placement policy is not defined.");if(["OUTSIDE_CONTENT","INSIDE_CONTENT"].indexOf(F)<=-1)throw new Error("The specified button container placement policy is not defined.")}if(["CONTENT","CONTAINER"].indexOf(k)<=-1)throw new Error("The specified resize policy is not defined.");if(3!==m.length||-1===m.indexOf("prev")&&-1===m.indexOf("prev")&&-1===m.indexOf("close"))throw new Error("The given order doesn't include all the buttons.");var A=this;h=Object.assign({close:".close",prev:".prev",next:".next"},h),g=Object.assign({close:"&times;",prev:"&lang;",next:"&rang;"},g),y=Object.assign({overlay:".overlay",content:".overlay-content"},y);var M=o.substr(1),H=l.substr(1),D=c.substr(1),U={close:h.close.substr(1),prev:h.prev.substr(1),next:h.next.substr(1)},z={overlay:y.overlay.substr(1),content:y.content.substr(1)};i.classList.contains(M)||i.classList.add(M);var B=i.querySelectorAll("figure"),R=null,q=createOverlay(),P=function(){var e=!0,t=!1,n=void 0;try{for(var i,r=B[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(o.classList.contains(D))return o}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return B[0]||null}(),_="function"==typeof SwipeEvent?new SwipeEvent({element:i,itemSelector:"figure",activeSelector:c}):null,W={containerClick:function containerClick(){A.isOpen()||A.open(null)},figureClick:function figureClick(e){e.stopImmediatePropagation();for(var t=e.target;"FIGURE"!==t.tagName;)t=t.parentNode;A.set(t).open(null)},dialogClick:function dialogClick(e){e.stopImmediatePropagation(),e.target.classList.contains(z.overlay)&&A.isOpen()&&A.close()},keyboardNavigation:function keyboardNavigation(e){if(A.isOpen())switch(e.which||e.keyCode||0){case 27:A.close();break;case 37:A.prev();break;case 39:A.next();break;case 36:A.open(0);break;case 35:A.open(-1)}},swipeNavigation:function swipeNavigation(e){var t=e.detail.direction||e.direction||null;"left"===t?A.prev():"right"===t&&A.next()},resize:function resize(){setContentSize()},buttons:createButtonsCallbacks()};function keepInBound(e){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:C)&&e<0?B.length+e+B.length:e)%B.length}function setContentSize(){if(q){var e=q.getContent();if(e)switch(e.tagName){case"IMG":!function setImageSize(e){if(q){var t=q.content.currentStyle||window.getComputedStyle(q.content),n=Math.min(1,(q.clientWidth-(parseFloat(t.marginLeft)+parseFloat(t.marginRight)))/e.naturalWidth,(q.clientHeight-(parseFloat(t.marginTop)+parseFloat(t.marginBottom)))/e.naturalHeight);"CONTENT"===k.toUpperCase()?(e.style.width=e.naturalWidth*n+"px",e.style.height=e.naturalHeight*n+"px"):"CONTAINER"===k.toUpperCase()&&(q.content.style.width=e.naturalWidth*n+"px",q.content.style.height=e.naturalHeight*n+"px")}}(e);break;case"VIDEO":!function setVideoSize(e){if(q){var t=q.content.currentStyle||window.getComputedStyle(q.content),n=Math.min(1,(q.clientWidth-(parseFloat(t.marginLeft)+parseFloat(t.marginRight)))/e.videoWidth,(q.clientHeight-(parseFloat(t.marginTop)+parseFloat(t.marginBottom)))/e.videoHeight);"CONTENT"===k.toUpperCase()?(e.style.width=e.videoWidth*n+"px",e.style.height=e.videoHeight*n+"px"):"CONTAINER"===k.toUpperCase()&&(q.content.style.width=e.videoWidth*n+"px",q.content.style.height=e.videoHeight*n+"px")}}(e);break;case"EMBED":case"IFRAME":case"OBJECT":!function setEmbedSize(e){if(q){var t=q.content.currentStyle||window.getComputedStyle(q.content);(!e.hasAttribute("data-width")||!e.hasAttribute("data-height")||e.width>parseInt(e.getAttribute("data-width"))||e.height>parseInt(e.getAttribute("data-height")))&&(e.setAttribute("data-width",e.width),e.setAttribute("data-height",e.height)),e.width=parseInt(e.getAttribute("data-width")),e.height=parseInt(e.getAttribute("data-height"));var n=Math.min((q.clientWidth-(parseFloat(t.marginLeft)+parseFloat(t.marginRight)))/e.width,(q.clientHeight-(parseFloat(t.marginTop)+parseFloat(t.marginBottom)))/e.height);"CONTAINER"===k.toUpperCase()&&(q.content.style.width=e.width*n+"px",q.content.style.height=e.height*n+"px"),e.width=parseInt(e.width*n),e.height=parseInt(e.height*n)}}(e)}}}function createOverlay(){if(O){if(R)return i.appendChild(R),R;var e=i.querySelector(y.overlay);e||((e=document.createElement("HTMLDialogElement"in window?"dialog":"div")).classList.add(z.overlay),e.content=document.createElement("div"),e.content.classList.add(z.content),e.appendChild(e.content)),e.buttons={};var t=function(){if(null===d)return null;var t=e.querySelector(d);if(!t){var n=d.substr(1);if(t=document.createElement("div"),"#"===d.charAt(0))t.id=n;else{if("."!==d.charAt(0))throw new Error("buttonContainerSelector must be a class or an ID. Complex selector given.");t.classList.add(n)}"OUTSIDE_CONTENT"===F.toUpperCase()?e.appendChild(t):"INSIDE_CONTENT"===F.toUpperCase()&&e.content.appendChild(t)}return t}(),n=!0,r=!1,o=void 0;try{for(var a,l=m[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value,c=e.querySelector(h[s]);c||((c=document.createElement("button")).classList.add(U[s]),c.innerHTML=g[s],null===t?e.appendChild(c):"ALL"===x.toUpperCase()?t.appendChild(c):"NAVIGATORS_ONLY"===x.toUpperCase()?"close"!==s?t.appendChild(c):e.appendChild(c):"CLOSE_ONLY"===x.toUpperCase()&&("close"===s?t.appendChild(c):e.appendChild(c))),e.buttons[s]=c}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e.getContent=function(){return e.content.querySelector("img, video, object, embed, iframe")},R=e,i.appendChild(R),R}return null}function getFigureIndex(e){return Array.prototype.indexOf.call(B,e)}function setCurrentFigure(e){null!=P&&P.classList.remove(D),e.classList.add(D),P=e}function updateOverlayFigure(){var e=P.cloneNode(!0);if(i.classList.add(H),q){"HTMLDialogElement"in window&&q instanceof HTMLDialogElement?q.open||q.showModal():q.classList.add(H);var t=q.content.querySelector("figure");t?q.content.replaceChild(e,t):q.content.firstChild?q.content.insertBefore(e,q.content.firstChild):q.content.appendChild(e),setContentSize()}}function navigateOverlayFigure(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;setCurrentFigure(B[keepInBound(getFigureIndex(P)+e,t)]),A.isOpen()&&updateOverlayFigure()}function createButtonsCallbacks(){if(q){for(var e={},t=Object.keys(q.buttons),n=function _loop(){var n=t[i];e[n]=function(e){e.stopImmediatePropagation(),A[n]()}},i=0;i<t.length;i++)n();return e}return null}var j=function setListenersFn(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(O){if(i.addEventListener("click",W.containerClick,!1),!e&&G||B.forEach(function(e){e.addEventListener("click",W.figureClick,!1)}),q.addEventListener("click",W.dialogClick,!1),document.addEventListener("keydown",W.keyboardNavigation),_&&(_.attach(),document.addEventListener("swipe",W.swipeNavigation)),window.addEventListener("resize",W.resize),q){W.buttons||(W.buttons=createButtonsCallbacks());for(var t=Object.keys(q.buttons),n=0;n<t.length;n++){var r=t[n];q.buttons[r].addEventListener("click",W.buttons[r],!1)}}}else if(i.removeEventListener("click",W.containerClick,!1),q.removeEventListener("click",W.dialogClick,!1),B.forEach(function(e){e.removeEventListener("click",W.figureClick,!1)}),document.removeEventListener("keydown",W.keyboardNavigation),_&&(_.detach(),document.removeEventListener("swipe",W.swipeNavigation)),window.removeEventListener("resize",W.resize),q)for(var o=Object.keys(q.buttons),a=0;a<o.length;a++){var l=o[a];q.buttons[l].removeEventListener("click",W.buttons[l],!1)}return setListenersFn}(!0),G=function(){if("MutationObserver"in window){var e=new MutationObserver(function(e,t){e.forEach(function(e){"childList"===e.type&&(B=i.querySelectorAll("figure"),e.addedNodes&&e.addedNodes.length>0&&e.addedNodes.forEach(function(e){"FIGURE"===e.tagName&&e.addEventListener("click",W.figureClick,!1)}),e.removedNodes&&P in e.removedNodes.values()&&(P=B[0]||null))})});return e.observe(i,{childList:!0}),e}return null}();this.open=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(null==e)e=getFigureIndex(P);else if(e=parseInt(e),N){if(e>B.length-1||Math.abs(e)>B.length-1)throw new Error("The element #".concat(e," cannot be found."))}else e=keepInBound(e);A.isOpen()&&B[e]===P||((B.length>0||e<=B.length||null==P)&&setCurrentFigure(B[0]),null!=P&&updateOverlayFigure());var n=null;return"function"!=typeof window.CustomEvent?(n=document.createEvent("opened")).initCustomEvent("opened",!1,!1,{current:P}):n=new CustomEvent("opened",{detail:{current:P}}),i.dispatchEvent(n),t},this.prev=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=P;navigateOverlayFigure(-1,e);var r=null;return"function"!=typeof window.CustomEvent?(r=document.createEvent("prev")).initCustomEvent("prev",!1,!1,{current:P,next:n}):r=new CustomEvent("prev",{detail:{current:P,next:n}}),i.dispatchEvent(r),t},this.next=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=P;navigateOverlayFigure(1,e);var r=null;return"function"!=typeof window.CustomEvent?(r=document.createEvent("next")).initCustomEvent("next",!1,!1,{current:P,prev:n}):r=new CustomEvent("next",{detail:{current:P,prev:n}}),i.dispatchEvent(r),t},this.set=function(e){if(!e)throw new Error("The given element is not a valid value. Please, insert an integer or a DOM element.");if("number"==typeof e){if(N){if(e>B.length-1||Math.abs(e)>B.length-1)throw new Error("The element #".concat(e," cannot be found."))}else e=keepInBound(e);e=B[e]}else{if(!(e instanceof HTMLElement))throw new Error("The given element is not a valid value. Please, insert an integer or a DOM element.");if(getFigureIndex(e)<0)throw new Error("The given element is not in this gallery.")}var n=P;setCurrentFigure(e),updateOverlayFigure();var r=null;return"function"!=typeof window.CustomEvent?(r=document.createEvent("setted")).initCustomEvent("setted",!1,!1,{current:P,old:n}):r=new CustomEvent("setted",{detail:{current:P,old:n}}),i.dispatchEvent(r),t},this.close=function(){q&&("HTMLDialogElement"in window&&q instanceof HTMLDialogElement?q.open&&q.close():q.classList.remove(H));var e=null;return"function"!=typeof window.CustomEvent?(e=document.createEvent("closed")).initCustomEvent("closed",!1,!1,{current:P}):e=new CustomEvent("closed",{detail:{current:P}}),i.dispatchEvent(e),t},this.setOpenable=function(e){if(null==e||"boolean"!=typeof e)throw new Error("The value must be a boolean.");if(e!==O){O=e,e?(q=createOverlay(),G&&G.observe(i,{childList:!0})):(q=null,G&&G.disconnect(),q&&i.removeChild(q)),j();var n=null;"function"!=typeof window.CustomEvent?(n=document.createEvent("openablechange")).initCustomEvent("openablechange",!1,!1,{openable:e}):n=new CustomEvent("openablechange",{detail:{openable:e}}),i.dispatchEvent(n)}return t},this.updateFigures=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return B=i.querySelctorAll("figure"),e&&B.forEach(function(e){e.addEventListener("click",W.figureClick,!1)}),P in B||(P=B[0]||null),t},this.isOpen=function(){return i.classList.contains(H)},this.isOpenable=function(){return O},this.getContainer=function(){return i},this.getCurrentFigure=function(){return P},this.getActiveFigure=function(){return q.content.querySelector("figure")},this.getActiveContent=function(){return q.getContent()},this.getSwipeHandler=function(){return _}}
//# sourceMappingURL=fig-gallery.cache.js.map
