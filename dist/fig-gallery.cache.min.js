"use strict";function FigureGallery(e){var t=this,n=e.container,i=void 0===n?"#gallery":n,r=e.gallerySelector,o=void 0===r?".gallery":r,a=e.openSelector,l=void 0===a?".open":a,s=e.currentSelector,u=void 0===s?".current":s,c=e.buttonSelectors,d=void 0===c?{}:c,v=e.buttonContents,g=void 0===v?{}:v,h=e.cycle,p=void 0===h||h,f=e.overlaySelectors,m=void 0===f?{}:f,b=e.openable,w=void 0===b||b,E=e.throwsOpenIndexError,y=void 0!==E&&E;if("string"==typeof i&&(i=document.querySelector(i)),!(i instanceof HTMLElement))throw new Error("Il contenitore della galleria deve essere un elemento valido.");var C=this;d=Object.assign({close:".close",prev:".prev",next:".next"},d),g=Object.assign({close:"&times;",prev:"&lang;",next:"&rang;"},g),m=Object.assign({overlay:".overlay",content:".overlay-content"},m);var L=o.substr(1),k=l.substr(1),F=u.substr(1),O={close:d.close.substr(1),prev:d.prev.substr(1),next:d.next.substr(1)},I={overlay:m.overlay.substr(1),content:m.content.substr(1)};i.classList.contains(L)||i.classList.add(L);var S=i.querySelectorAll("figure"),x=null,M=createOverlay(),H=function(){var e=!0,t=!1,n=void 0;try{for(var i,r=S[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(o.classList.contains(F))return o}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return S[0]||null}(),A={containerClick:function containerClick(){C.isOpen()||C.open(null)},figureClick:function figureClick(e){e.stopImmediatePropagation(),C.set(e.target).open(null)},keyboardNavigation:function keyboardNavigation(e){if(C.isOpen())switch(e.which||e.keyCode||0){case 27:t.close();break;case 37:t.prev();break;case 39:t.next();break;case 36:t.open(0);break;case 35:t.open(-1)}},resize:function resize(){setContentSize()},buttons:createButtonsCallbacks()};function keepInBound(e){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:p)&&e<0?S.length+e+S.length:e)%S.length}function setContentSize(){if(M){var e=M.getContent();if(e)switch(e.tagName){case"IMG":!function setImageSize(e){if(M){var t=M.content.currentStyle||window.getComputedStyle(M.content),n=Math.min(1,(M.clientWidth-(parseFloat(t.marginLeft)+parseFloat(t.marginRight)))/e.naturalWidth,(M.clientHeight-(parseFloat(t.marginTop)+parseFloat(t.marginBottom)))/e.naturalHeight);e.style.width=e.naturalWidth*n+"px",e.style.height=e.naturalHeight*n+"px"}}(e);break;case"VIDEO":!function setVideoSize(e){if(M){var t=M.content.currentStyle||window.getComputedStyle(M.content),n=Math.min(1,(M.clientWidth-(parseFloat(t.marginLeft)+parseFloat(t.marginRight)))/e.videoWidth,(M.clientHeight-(parseFloat(t.marginTop)+parseFloat(t.marginBottom)))/e.videoHeight);e.style.width=e.videoWidth*n+"px",e.style.height=e.videoHeight*n+"px"}}(e);break;case"EMBED":case"IFRAME":case"OBJECT":!function setEmbedSize(e){if(M){var t=M.content.currentStyle||window.getComputedStyle(M.content);(!e.hasAttribute("data-width")||!e.hasAttribute("data-height")||e.width>parseInt(e.getAttribute("data-width"))||e.height>parseInt(e.getAttribute("data-height")))&&(e.setAttribute("data-width",e.width),e.setAttribute("data-height",e.height)),e.width=parseInt(e.getAttribute("data-width")),e.height=parseInt(e.getAttribute("data-height"));var n=Math.min((M.clientWidth-(parseFloat(t.marginLeft)+parseFloat(t.marginRight)))/e.width,(M.clientHeight-(parseFloat(t.marginTop)+parseFloat(t.marginBottom)))/e.height);e.width=parseInt(e.width*n),e.height=parseInt(e.height*n)}}(e)}}}function createOverlay(){if(w){if(x)return i.appendChild(x),x;var e=i.querySelector(m.overlay);for(var t in e||((e=document.createElement("HTMLDialogElement"in window?"dialog":"div")).classList.add(I.overlay),e.content=document.createElement("div"),e.content.classList.add(I.content),e.appendChild(e.content)),e.buttons={},d){var n=e.querySelector(d[t]);n||((n=document.createElement("button")).classList.add(O[t]),n.innerHTML=g[t],e.appendChild(n)),e.buttons[t]=n}return e.getContent=function(){return e.content.querySelector("img, video, object, embed, iframe")},x=e,i.appendChild(x),x}return null}function getFigureIndex(e){return Array.prototype.indexOf.call(S,e)}function setCurrentFigure(e){null!=H&&H.classList.remove(F),e.classList.add(F),H=e}function updateOverlayFigure(){var e=H.cloneNode(!0);i.classList.add(k),M&&("HTMLDialogElement"in window&&M instanceof HTMLDialogElement?M.open||M.showModal():M.classList.add(k),M.content.innerHTML="",M.content.appendChild(e),setContentSize())}function navigateOverlayFigure(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;setCurrentFigure(S[keepInBound(getFigureIndex(H)+e,t)]),C.isOpen()&&updateOverlayFigure()}function createButtonsCallbacks(){if(M){for(var e={},t=Object.keys(M.buttons),n=function _loop(){var n=t[i];e[n]=function(e){e.stopImmediatePropagation(),C[n]()}},i=0;i<t.length;i++)n();return e}return null}var T=function setListenersFn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||"boolean"!=typeof e)throw new Error("Il valore deve essere di tipo booleano.");if(e){if(w&&(i.addEventListener("click",A.containerClick,!1),!t&&z||S.forEach(function(e){e.addEventListener("click",A.figureClick,!1)}),document.addEventListener("keydown",A.keyboardNavigation),window.addEventListener("resize",A.resize),M)){A.buttons||(A.buttons=createButtonsCallbacks());for(var n=Object.keys(M.buttons),r=0;r<n.length;r++){var o=n[r];M.buttons[o].addEventListener("click",A.buttons[o],!1)}}}else if(i.removeEventListener("click",A.containerClick,!1),S.forEach(function(e){e.removeEventListener("click",A.figureClick,!1)}),document.removeEventListener("keydown",A.keyboardNavigation),window.removeEventListener("resize",A.resize),M)for(var a=Object.keys(M.buttons),l=0;l<a.length;l++){var s=a[l];M.buttons[s].removeEventListener("click",A.buttons[s],!1)}return setListenersFn}(w,!0),z=null;"MutationObserver"in window&&(z=new MutationObserver(function(e,t){e.forEach(function(e){"childList"===e.type&&(S=i.querySelectorAll("figure"),e.addedNodes&&e.addedNodes.length>0&&e.addedNodes.forEach(function(e){"FIGURE"===e.tagName&&e.addEventListener("click",A.figureClick,!1)}),e.removedNodes&&H in e.removedNodes.values()&&(H=S[0]||null))})})).observe(i,{childList:!0}),this.open=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(null==e)e=getFigureIndex(H);else if(e=parseInt(e),y){if(e>S.length-1||Math.abs(e)>S.length-1)throw new Error("L'oggetto ".concat(e," non è disponibile."))}else e=keepInBound(e);C.isOpen()&&S[e]===H||((S.length>0||e<=S.length||null==H)&&setCurrentFigure(S[0]),null!=H&&updateOverlayFigure());var n=null;return"function"!=typeof window.CustomEvent?(n=document.createEvent("opened")).initCustomEvent("opened",!1,!1,{current:H}):n=new CustomEvent("opened",{detail:{current:H}}),i.dispatchEvent(n),t},this.prev=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=H;navigateOverlayFigure(-1,e);var r=null;return"function"!=typeof window.CustomEvent?(r=document.createEvent("prev")).initCustomEvent("prev",!1,!1,{current:H,next:n}):r=new CustomEvent("prev",{detail:{current:H,next:n}}),i.dispatchEvent(r),t},this.next=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=H;navigateOverlayFigure(1,e);var r=null;return"function"!=typeof window.CustomEvent?(r=document.createEvent("next")).initCustomEvent("next",!1,!1,{current:H,prev:n}):r=new CustomEvent("next",{detail:{current:H,prev:n}}),i.dispatchEvent(r),t},this.set=function(e){if(!e)throw new Error("L'elemento indicato non è un valore valido. Inserire un numero intero o un elemento DOM.");if("number"==typeof e){if(y){if(e>S.length-1||Math.abs(e)>S.length-1)throw new Error("L'oggetto ".concat(e," non è disponibile."))}else e=keepInBound(e);e=S[e]}else{if(!(e instanceof HTMLElement))throw new Error("L'elemento indicato non è un valore valido. Inserire un numero intero o un elemento DOM.");if(getFigureIndex(e)<0)throw new Error("L'elemento indicato non fa parte di questa galleria.")}var n=H;setCurrentFigure(e),updateOverlayFigure();var r=null;return"function"!=typeof window.CustomEvent?(r=document.createEvent("setted")).initCustomEvent("setted",!1,!1,{current:H,old:n}):r=new CustomEvent("setted",{detail:{current:H,old:n}}),i.dispatchEvent(r),t},this.close=function(){M&&("HTMLDialogElement"in window&&M instanceof HTMLDialogElement?M.open&&M.close():M.classList.remove(k));var e=null;return"function"!=typeof window.CustomEvent?(e=document.createEvent("closed")).initCustomEvent("closed",!1,!1,{current:H}):e=new CustomEvent("closed",{detail:{current:H}}),i.dispatchEvent(e),t},this.setOpenable=function(e){if(null==e||"boolean"!=typeof e)throw new Error("Il valore deve essere di tipo booleano.");if(e!==w){w=e,e?(M=createOverlay(),z&&z.observe(i,{childList:!0})):(M=null,z&&z.disconnect(),M&&i.removeChild(M)),T(e);var n=null;"function"!=typeof window.CustomEvent?(n=document.createEvent("openablechange")).initCustomEvent("openablechange",!1,!1,{openable:e}):n=new CustomEvent("openablechange",{detail:{openable:e}}),i.dispatchEvent(n)}return t},this.updateFigures=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return S=contaier.querySelctorAll("figure"),e&&S.forEach(function(e){e.addEventListener("click",A.figureClick,!1)}),H in S||(H=S[0]||null),t},this.isOpen=function(){return i.classList.contains(k)},this.isOpenable=function(){return w},this.getContainer=function(){return i},this.getCurrentFigure=function(){return H},this.getActiveFigure=function(){return M.content},this.getActiveContent=function(){return M.getContent()}}
//# sourceMappingURL=fig-gallery.cache.js.map
